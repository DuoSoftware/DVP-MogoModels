var mongoose = require('mongoose');
var Schema = mongoose.Schema;

var consoleAccessLimitSchema = new Schema({
    accessType: String,
    accessLimit: Number
});

var codecAccessLimitSchema = new Schema({
    codec: {type: ObjectId,ref: 'Codec'},
    accessLimit: Number
});

var spaceLimitSchema = new Schema({
    spaceType: String,
    spaceUnit: {type: String, enum : ['MB','GB', 'TB'], default: 'GB', required: true},
    spaceLimit: Number
});

var scopeSchema = new Schema({
    scopeName: String,
    feature: String,
    actions: [String],
    limit: Number
});

var resourceSchema = new Schema({
    resourceName: String,
    scopes: [scopeSchema]
});

var packageSchema = new Schema({
    packageName: { type: String, required: true, unique: true },
    packageType: String,
    navigationType: { type: String, required: true },
    description: String,
    consoleAccessLimit: [consoleAccessLimitSchema],
    resources: [resourceSchema],
    codecAccessLimits: [codecAccessLimitSchema],
    consoles: [String],
    veeryTask:[String],
    price: Number,
    spaceLimit: [spaceLimitSchema]
});

var Package = mongoose.model('Package', packageSchema);
module.exports = Package;
module.exports.consoleAccessLimitSchema = consoleAccessLimitSchema;
module.exports.resourceSchema = resourceSchema;
module.exports.spaceLimitSchema = spaceLimitSchema;