/**
 * Created by a on 6/3/2016.
 */

// grab the things we need
var mongoose = require('mongoose');
var Schema = mongoose.Schema;
var ObjectId = Schema.ObjectId;

var consoleAccessLimitSchema = new Schema({
    accessType: String,
    accessLimit: Number,
    currentAccess: [String]
});

var resourceAccessLimitSchema = new Schema({
    scopeName: String,
    accessLimit: Number
});

var packageDetailSchema = new Schema({
    veeryPackage: {type: ObjectId,ref: 'Package'},
    buyDate: Date
});

var unitDetailSchema = new Schema({
    veeryUnit: {type: ObjectId,ref: 'PackageUnit'},
    units: Number,
    buyDate: Date
});

var organisationSchema = new Schema({
    ownerId:String,
    companyName: {type: String, require: true, unique: true},
    companyEnabled: Boolean,
    id: Number,
    tenant: Number,
    packages: [String],
    packageDetails: [packageDetailSchema],
    unitDetails: [unitDetailSchema],
    consoleAccessLimits: [consoleAccessLimitSchema],
    resourceAccessLimits: [resourceAccessLimitSchema],
    tenantRef:{type: ObjectId,ref: 'Tenant',  required: true},
    created_at: Date,
    updated_at: Date
});

var Organisation = mongoose.model('Organisation', organisationSchema);
module.exports = Organisation;
